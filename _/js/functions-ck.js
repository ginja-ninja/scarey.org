window.scarey=window.scarey||{};scarey.medium="screen and (min-width: 45em)";scarey.large="screen and (min-width: 90em)";scarey.scroll=function(e){$.scrollTo($(e),1e3,{easing:"easeInOutExpo"})};scarey.nav=function(){$(".more-nav").click(function(){$("#mobile-flyout").hasClass("slide-in")?$("#mobile-flyout").removeClass("slide-in").addClass("slide-out"):$("#mobile-flyout").addClass("slide-in");$(".main-content").toggleClass("dark");event.preventDefault()})};scarey.albumFilter=function(){var e=$(".filter"),t=$(".filter__toggle"),n=$(".filter__close"),r=$(".filter__slider-wrap a"),i=location.hash,s;t.on("click",function(){e.toggleClass("showing")});n.on("click",function(){e.removeClass("showing")});r.on("click",function(t){s=$(this).attr("href");t.preventDefault();e.removeClass("showing");setTimeout(function(){scarey.scroll(s)},300)})};scarey.slider={init:function(){matchMedia(scarey.medium).matches?this.carousel():this.swipe()},carousel:function(){function v(e){a+=e;$(o).each(function(){$(this).removeClass("on")});$(o[a]).addClass("on")}function m(e){return e.substr(7,e.length-8).split(", ")}var e=$(".filter__slider"),t=$(".filter__slider-wrap"),n=$(".filter__slider-wrap li"),r=n.innerWidth(),i=$(".prev"),s=$(".next"),o=[],u,a,f=$("#position"),l,c,h,p,d;matchMedia(scarey.large).matches?l=4:l=2;u=n.length/l;for(d=0;d<u;d++)f.append("<a class='bullet'></a>");$("#position a").each(function(){var e=$(this);o.push(e)});a=0;$(o[a]).addClass("on");initialDist=r*l;e.css("width",r*l);t.css("width",r*n.length);s.on("click",function(){c=m(t.css("transform"))[4];h=parseInt(c,10);p=initialDist-h;if(p===r*n.length)return;t.css({"-webkit-transform":"translateX(-"+p+"px)","-moz-transform":"translateX(-"+p+"px)","-o-transform":"translateX(-"+p+"px)","-ms-transform":"translateX(-"+p+"px)",transform:"translateX(-"+p+"px)"});v(1)});i.on("click",function(){c=m(t.css("transform"))[4];h=parseInt(c,10);p=initialDist+h;if(h==0)return;t.css({"-webkit-transform":"translateX("+p+"px)","-moz-transform":"translateX("+p+"px)","-o-transform":"translateX("+p+"px)","-ms-transform":"translateX("+p+"px)",transform:"translateX("+p+"px)"});v(-1)})},swipe:function(){var e=$("#slider li"),t=e.length,n,r=[],i=$("#position"),s;$(e).each(function(){i.append("<a class='bullet'></a>")});$("#position a ").each(function(){var e=$(this);r.push(e)});$("#position a:first-child").addClass("on");window.mySwipe=$("#slider").Swipe({continuous:!1,callback:function(e){var t=r.length;while(t--)r[t].removeClass("on");r[e].addClass("on")}}).data("Swipe")}};scarey.stickyNav=function(){$(document).on("scroll",function(){var e=$(document).scrollTop();e>=500?$("#nav").hasClass("sticky")||$("#nav").addClass("sticky").css({top:"-300px"}).stop().animate({top:0},500):$("#nav").removeClass("sticky").removeAttr("style")})};scarey.history=function(e,t){var n=e.History,r=e.jQuery,i=e.document;if(!n.enabled)return!1;r(function(){var t=".wrap",s=r(t).filter(":first"),o=s.get(0),u=r(e),a=r(i.body),f=n.getRootUrl();s.length===0&&(s=a);r.expr[":"].internal=function(e){var t=r(e),n=t.attr("href")||"",i;i=n.substring(0,f.length)===f||n.indexOf(":")===-1;return i};var l=function(e){var t=String(e).replace(/<\!DOCTYPE[^>]*>/i,"").replace(/<(html|head|body|title|meta|script)([\s\>])/gi,'<div class="document-$1"$2').replace(/<\/(html|head|body|title|meta|script)\>/gi,"</div>");return t};r.fn.ajaxify=function(){var e=r(this);e.find(".page-nav a").click(function(e){var t=r(this),i=t.attr("href"),s=t.attr("title")||null;if(e.which===2||e.metaKey)return!0;n.pushState(null,s,i);e.preventDefault();return!1});return e};a.ajaxify();u.bind("statechange",function(){var u=n.getState(),f=u.url,c;a.addClass("loading");r("#main-content").removeClass("animate-in").addClass("animate-out");r.ajax({url:f,success:function(n){var u=r(l(n)),c=u.find(".document-body:first"),h=c.find(t).filter(":first"),p,d;d=h.find(".document-script");d.length&&d.detach();p=h.html()||u.html();if(!p){i.location.href=f;return!1}s.html(p).ajaxify();scarey.nav();scarey.albumFilter();scarey.slider.init();i.title=u.find(".document-title:first").text();try{i.getElementsByTagName("title")[0].innerHTML=i.title.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(v){}d.each(function(){var e=r(this),t=e.text(),n=e.attr("src"),s=i.createElement("script");if(n){s.src=n;o.appendChild(s)}else{s.appendChild(i.createTextNode(t));o.appendChild(s)}});r("#main-content").removeClass("animate-out").addClass("animate-in");a.removeClass("loading");typeof e._gaq!="undefined"&&e._gaq.push(["_trackPageview",relativeUrl])},error:function(e){i.location.href=f;return!1}})})})}(window);scarey.colorbox={init:function(){if(!matchMedia(scarey.medium).matches)return;$.getScript("/_/js/libs/colorbox.js",function(){scarey.colorbox.go()})},go:function(){$(".photo-container a").colorbox({rel:"group",scalePhotos:!0,maxHeight:"900px",speed:200,opacity:".7"})}};scarey.blog=function(){$(".post-content p").each(function(){var e=$(this).text().split(" ").length;if(e>=10){$(this).css("text-align","justify");$(this).siblings().css("text-align","justify")}})};$(document).ready(function(){scarey.nav();scarey.stickyNav();scarey.albumFilter();scarey.slider.init();scarey.colorbox.init();scarey.blog()});